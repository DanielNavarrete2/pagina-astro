---
// src/pages/index.astro
import type { Character } from "../types/simpsons";
import Layout from "../layouts/Layout.astro";

const data = async () => {
	try {
		const response = await fetch(
			"https://thesimpsonsapi.com/api/characters",
		);
		const characters = await response.json();
		return characters.results;
	} catch (error) {
		console.error("Error al obtener los datos:", error);
	}
};

const personajes: Character[] = await data();
---


	<div class="container mx-auto px-4 py-8">
		<div class="grid grid-cols-4 gap-4">
			{
				personajes.map((character) => (
					<div class="bg-white rounded-lg shadow-lg p-5 ">
						<img
							src={`https://cdn.thesimpsonsapi.com/500${character.portrait_path}`}
							alt={character.occupation}
							class="rounded-2xl shadow-md w-full h-56 object-contain mb-4"
						/>
						<h2 class="text-2xl font-semibold mt-4 text-center">
							{character.name}
						</h2>

						<div class="mt-3 text-sm space-y-1 text-gray-700">
							<p>
								<span class="font-semibold">Edad:</span>{" "}
								{character.age}
							</p>
							<p>
								<span class="font-semibold">GÃ©nero:</span>{" "}
								{character.gender}
							</p>
						</div>

						<a
							href={`/personajes/${character.id}`}
							class="block text-center mt-5 bg-yellow-500  text-white px-4 py-2 rounded-lg "
						>
							Ver detalles
						</a>
					</div>
				))
			}
		</div>
	</div>
